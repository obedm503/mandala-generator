{"version":3,"sources":["index.js"],"names":["graphBounds","n","abs","Math","randomColor","random","toString","slice","toUpperCase","randomNumbers","range","amount","Array","fill","map","filter","num","Number","isNaN","toFixed","lines","numbers","max","bounds","replace","curves","reduce","arr","oppositeN","yBounds","push","floor","derivative","circles","flowers","integrals","calculator","document","addEventListener","Desmos","GraphingCalculator","getElementById","keypad","expressionsCollapsed","window","graph","parseFloat","value","parseInt","setBlank","largest","ex","i","indexOf","forEach","exp","setExpression","latex","color","min","clientHeight","ratio","clientWidth","setMathBounds","left","right","bottom","top","screenshot","a","createElement","href","download","body","appendChild","click","removeChild"],"mappings":"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","file":"src.8cc754eb.js","sourceRoot":"../src","sourcesContent":["// @ts-check\n\nfunction graphBounds(n) {\n  const abs = Math.abs(n);\n  return `\\\\left\\\\{ ${-1 * abs * 1.618} < x < ${abs * 1.618} \\\\right\\\\}`;\n}\n\nfunction randomColor() {\n  return (\n    '#' +\n    Math.random()\n      .toString(16)\n      .slice(2, 8)\n      .toUpperCase()\n  );\n}\nfunction randomNumbers(range, amount) {\n  return Array(amount)\n    .fill('')\n    .map(() => range * (Math.random() * 2 - 1))\n    .filter(num => num !== 0 && !Number.isNaN(num))\n    .map(num => Number(num.toFixed(4)));\n}\nfunction lines(numbers, max) {\n  return numbers.map(num => {\n    const bounds = graphBounds(max);\n    return `y=${num}(x+${num}${bounds.replace('x', 'y')}${bounds})`;\n  });\n}\nfunction curves(numbers, max) {\n  return numbers.reduce((arr, n) => {\n    const oppositeN = n * -1;\n    const abs = Math.abs(n);\n    const bounds = graphBounds(max);\n    const yBounds = bounds.replace('x', 'y');\n\n    arr.push(\n      `f_{${Math.floor(abs)}}=-\\\\left(\\\\frac{x^2}{${n}}+${n *\n        -1}\\\\right)${bounds.replace('x', `f_${Math.floor(abs)}`)}${bounds}`,\n    );\n    arr.push(`y=\\\\frac{x^2}{${n}}+${oppositeN}${yBounds}${bounds}`);\n    arr.push(\n      `x=-\\\\left(\\\\frac{y^2}{${n}}+${oppositeN}\\\\right)${yBounds}${bounds}`,\n    );\n    arr.push(`x=\\\\frac{y^2}{${n}}+${oppositeN}${yBounds}${bounds}`);\n    return arr;\n  }, []);\n}\nfunction derivative(numbers, max) {\n  return numbers.reduce((arr, n) => {\n    const bounds = graphBounds(max);\n    const yBounds = bounds.replace('x', 'y');\n    arr.push(`y=x^{${n}}${yBounds}${bounds}`);\n    arr.push(`y=${n}x^{${n - 1}}${yBounds}${bounds}`);\n    return arr;\n  }, []);\n}\nfunction circles(numbers) {\n  return numbers.map(n => `r=${n}`);\n}\nfunction flowers(numbers) {\n  return numbers.reduce((arr, n) => {\n    arr.push(`r=${n}\\\\cos${n}\\\\theta`);\n    arr.push(`r=${n * -1}\\\\cos${n}\\\\theta`);\n    arr.push(`r=${n}\\\\cos${n / 10}\\\\pi\\\\theta`);\n    return arr;\n  }, []);\n}\nfunction integrals(numbers) {\n  return numbers.map(n => {\n    const abs = Math.abs(n);\n    return `y=\\\\int_{${abs * -1}}^{${abs}}f_{${Math.floor(abs)}}dx`;\n  });\n}\n\nlet calculator;\ndocument.addEventListener('DOMContentLoaded', () => {\n  // @ts-ignore\n  calculator = Desmos.GraphingCalculator(\n    document.getElementById('calculator'),\n    {\n      keypad: false,\n      expressionsCollapsed: true,\n      // polarMode: true\n    },\n  );\n  // calculator.setState({\"version\":3,\"graph\":{\"showGrid\":true,\"showXAxis\":false,\"showYAxis\":false,\"xAxisStep\":0,\"yAxisStep\":0,\"xAxisMinorSubdivisions\":0,\"yAxisMinorSubdivisions\":0,\"xAxisArrowMode\":\"NONE\",\"yAxisArrowMode\":\"NONE\",\"xAxisLabel\":\"\",\"yAxisLabel\":\"\",\"xAxisNumbers\":false,\"yAxisNumbers\":false,\"polarMode\":true,\"polarNumbers\":false,\"degreeMode\":true,\"projectorMode\":false,\"squareAxes\":true,\"viewport\":{\"xmin\":-10,\"ymin\":-8.527027027027028,\"xmax\":10,\"ymax\":8.527027027027028}},\"expressions\":{\"list\":[{\"id\":\"47\",\"type\":\"expression\",\"latex\":\"t=-0.0333\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":true,\"secret\":false,\"color\":\"#6042a6\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false,\"sliderMin\":\"-.5\",\"sliderMax\":\"0.5\",\"sliderHardMin\":true,\"sliderHardMax\":true,\"sliderInterval\":\"\",\"sliderAnimationPeriod\":8000,\"sliderLoopMode\":\"LOOP_FORWARD_REVERSE\",\"sliderPlayDirection\":1,\"sliderIsPlaying\":false},{\"id\":\"20\",\"type\":\"expression\",\"latex\":\"y=t^{\\\\pi^2}x^{-2}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#2d70b3\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"22\",\"type\":\"expression\",\"latex\":\"y=-t^{\\\\pi^2}x^{-2}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#6042a6\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"27\",\"type\":\"expression\",\"latex\":\"x=t^{\\\\pi^2}y^{-2}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#388c46\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"28\",\"type\":\"expression\",\"latex\":\"x=-t^{\\\\pi^2}y^{-2}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#fa7e19\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"19\",\"type\":\"expression\",\"latex\":\"r=t\\\\frac{\\\\theta}{\\\\pi}\\\\cos5\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#fa7e19\",\"style\":\"normal\",\"dragMode\":\"AUTO\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"30\",\"type\":\"expression\",\"latex\":\"r=-t\\\\frac{\\\\theta}{\\\\pi}\\\\cos5\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#6042a6\",\"style\":\"normal\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"32\",\"type\":\"expression\",\"latex\":\"r=20t\\\\frac{\\\\theta}{\\\\sqrt{\\\\left|t\\\\right|}}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#000000\",\"style\":\"dashed\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"33\",\"type\":\"expression\",\"latex\":\"r=-20t\\\\frac{\\\\theta}{\\\\sqrt{\\\\left|t\\\\right|}}\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#c74440\",\"style\":\"dashed\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"34\",\"type\":\"expression\",\"latex\":\"r=-\\\\theta t\\\\cos\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#2d70b3\",\"style\":\"dashed\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"39\",\"type\":\"expression\",\"latex\":\"r=\\\\theta t\\\\cos\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#388c46\",\"style\":\"dotted\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"42\",\"type\":\"expression\",\"latex\":\"r=t\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#6042a6\",\"style\":\"normal\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false},{\"id\":\"43\",\"type\":\"expression\",\"latex\":\"r=-t\\\\theta\",\"domain\":{\"min\":\"0\",\"max\":\"1\"},\"label\":\"\",\"hidden\":false,\"secret\":false,\"color\":\"#c74440\",\"style\":\"normal\",\"dragMode\":\"NONE\",\"residualVariable\":\"\",\"regressionParameters\":{},\"isLogModeRegression\":false}]}})\n});\n\nwindow['mandala'] = {\n  graph() {\n    // @ts-ignore\n    const range = parseFloat(document.getElementById('range').value);\n    // @ts-ignore\n    const amount = parseInt(document.getElementById('amount').value, 10);\n\n    calculator.setBlank();\n    // range + 1 to alevitate Math.random's inability to produce 1\n    // Math.random has a range of [0,1)\n    const numbers = randomNumbers(range + 1, amount);\n    const largest = Math.max(...numbers);\n    // numbers = [3];\n    const expressions = [\n      ...lines(numbers, largest),\n      ...curves(numbers, largest),\n      ...derivative(numbers, largest),\n      ...circles(numbers),\n      ...flowers(numbers),\n      ...integrals(numbers),\n    ];\n    expressions\n      .filter((ex, i, arr) => arr.indexOf(ex) === i)\n      .forEach(exp =>\n        calculator.setExpression({\n          latex: exp,\n          color: randomColor(),\n        }),\n      );\n\n    // interesting relationship between circle radius and spike tips\n    // multiplying the radius by  809/500 or 1.618 gives the coordinates\n    // for the intersection point between the curves that form the spikes\n    // + 0.5 adds some padding so that the intersection is not at the edge\n    // of the graph\n    // phi = 1.618\n    let max = (largest + 0.5) * 1.618;\n    let min = max * -1;\n    // graph's height and width\n    const { clientHeight, clientWidth } = document.getElementById('calculator');\n    const ratio = clientWidth / clientHeight;\n    // multiplying the domain by the ratio prevents the circles from appearing\n    // as ovals, essentially makes the graph's \"aspect ratio\" 1:1\n    min = min > 0 ? min * -1 : min;\n    max = max < 0 ? max * -1 : max;\n    calculator.setMathBounds({\n      left: min * ratio,\n      right: max * ratio,\n      bottom: min,\n      top: max,\n    });\n  },\n  screenshot() {\n    const screenshot = calculator.screenshot();\n    const a = document.createElement('a');\n    a.href = screenshot;\n    a.download = 'random-mandala';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  },\n};\n"]}